<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/client/home"></ion-back-button>
    </ion-buttons>
    <ion-title>Mis Reservas</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content color="light">

  <ng-container *ngIf="reservations$ | async as reservations; else loading">
    
    <ion-list *ngIf="reservations.length > 0" class="bg-transparent pt-2">
      
      <ion-item-group *ngFor="let res of reservations" class="mb-3 shadow-sm bg-white">
        <ion-item lines="none" class="py-1">
          <ion-icon name="calendar-number" slot="start" color="primary" class="self-start mt-3"></ion-icon>
          
          <ion-label class="ion-text-wrap">
            <div class="flex justify-between items-center mb-1">
              <h3 class="font-bold text-gray-800">
                {{ res.date | date:'EEEE, d MMMM' }}
              </h3>
              <ion-badge [color]="getStatusColor(res.status)">
                {{ res.status }}
              </ion-badge>
            </div>
            
            <p class="text-sm font-semibold text-gray-600">
              {{ res.time }} • {{ res.branch?.name || 'Sede' }}
            </p>
            <p class="text-xs text-gray-500">
              {{ res.zone?.name }} • Mesas: {{ res.tableIds.length }}
            </p>
          </ion-label>
        </ion-item>
      </ion-item-group>

    </ion-list>

    <div *ngIf="reservations.length === 0" class="flex flex-col items-center justify-center h-full pb-20">
      <div class="p-6 bg-white rounded-full shadow-sm mb-6">
        <ion-icon name="calendar-outline" class="text-6xl text-gray-300"></ion-icon>
      </div>
      <h2 class="text-xl font-bold text-gray-700">Sin reservas activas</h2>
      <p class="text-gray-500 text-center px-8 mb-8">
        Aún no has realizado ninguna reserva. ¡Encuentra el lugar perfecto hoy!
      </p>
      <ion-button routerLink="/client/home" shape="round">
        Explorar Sedes
      </ion-button>
    </div>

  </ng-container>

  <ng-template #loading>
    <div class="flex flex-col items-center justify-center h-64">
      <ion-spinner name="bubbles" color="primary"></ion-spinner>
      <p class="mt-4 text-gray-500 text-sm">Cargando tu historial...</p>
    </div>
  </ng-template>

</ion-content>